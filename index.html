<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Connect 4</title>
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.2/normalize.min.css">-->
    <link rel="stylesheet" href="local/normalize.min.css">
    <style type="text/css" media="all">
        #main {
            background-color: blue;
            width: 350px;
            overflow: hidden;
        }

        .item {
            border-radius: 55px;
            background-color: #fff;
            width: 40px;
            height: 40px;
            float: left;
            border: 5px solid blue;
        }

        .item.active {
        }

        .item.red {
            background-color: #ff0000;
        }

        .item.yellow {
            background-color: yellow;
        }

        .row-0 {
            cursor: pointer;
        }
    </style>
</head>
<body>
<div id="main"></div>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore-min.js"></script>-->

<script src="local/jquery.min.js"></script>
<script src="local/underscore-min.js"></script>
<script type="text/javascript" charset="utf-8">
    (function ( $ ) {
        var connectFour = {
            tableSize : [ 7, 6 ],
            lastMovedBy : false,
            currentPlayer : 'yellow',
            positions : [],

            init : function () {
                // Generate Game board
                this.generatePositions();
                this.buildGameBoard();
            },
            generatePositions : function () {

                for ( var i = 0; i < this.tableSize[ 0 ]; i++ ) {

                    this.positions[ i ] = [];

                    for ( var x = 0; x < this.tableSize[ 1 ]; x++ ) {
                        this.positions[ i ][ x ] = 0;
                    }
                }
            },
            buildGameBoard : function () {
                _( this.tableSize[ 1 ] ).times( function ( rowIndex ) {
                    _( connectFour.tableSize[ 0 ] ).times( function ( colIndex ) {
                        $( '#main' ).append( connectFour.createConnectCircle( colIndex, rowIndex ) );
                    } );
                } );
            },
            createConnectCircle : function ( colIndex, rowIndex ) {
                var item = $( '<div>' ).addClass( 'item' ).attr( 'data-col', colIndex ).attr( 'data-row', rowIndex );
//                var item = $( '<div>' ).addClass( 'item' ).addClass( 'col-' + colIndex ).addClass( 'row-' + rowIndex );
//                if ( rowIndex === 0 ) {
                    item.bind( 'click', this.clickHandler );
//                }
                return item;
            },
//            dropCircle : function ( colIndex ) {
//                this.lastMovedBy = this.currentPlayer;
//                this.currentPlayer = !this.currentPlayer;
//                var pos = 0; // start your way from here
//                $( '.item.col-' + colIndex + '.row-' + pos ).addClass( (this.currentPlayer ? 'yellow' : 'red') );
//                this.tryToGameOver( colIndex, pos );
//            },
//
//            tryToGameOver : function ( col, row ) {
//                this.checkHorizontal(col, row);
//                this.checkVertical(col, row);
//                this.checkDiagonal(col, row);
//            },
//
//            gameOver : function () {
//                var winner = (this.lastMovedBy) ? 'yellow' : 'red';
//                $('body' ).addClass('winner-' + winner);
//                console.log( 'Winner: ' + winner );
//            },
            clickHandler : function ( event ) {
                event.preventDefault();

                console.log( $( this ).attr('data-row' ), $( this ).attr('data-col' ) );
                console.log(this.currentPlayer);
                $(this ).addClass('red');
//                var $colIndex = $( this ).prop( 'class' ).split( ' ' )[ 1 ].split( '-' ).reverse()[ 0 ];
//                $colIndex = parseInt( $colIndex, 10 );
//                connectFour.dropCircle( $colIndex );
            },
            checkHorizontal : function ( col, row ) {

                console.log( 'check row ' + row );
                console.log( 'check row ' + row + 1 );
                console.log( 'check row ' + row + 2 );
                console.log( 'check row ' + row + 3 );
                console.log( 'check row ' + row + 4 );

            },
            checkVertical : function ( col, row ) {

                console.log( 'check col ' + col );
                console.log( 'check col ' + col + 1 );
                console.log( 'check col ' + col + 2 );
                console.log( 'check col ' + col + 3 );
                console.log( 'check col ' + col + 4 );

            },
            checkDiagonal : function ( col, row ) {
                console.log( 'check diagonal' );
                console.log( col, row );
                console.log( col + 1, row + 1 );
                console.log( col + 2, row + 2 );
                console.log( col + 3, row + 3 );
                console.log( col + 4, row + 4 );
            }
        };

        connectFour.init();

    })( jQuery );
</script>
</body>
</html>
